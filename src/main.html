<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Genshin-Init</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link
      rel="stylesheet"
      href="http://at.alicdn.com/t/c/font_3672830_tibwxaf01mc.css"
    />
  </head>
  <body>
    <!--主页面-->
    <div id="content"></div>
    <!--侧边栏-->
    <div id="sidebar">
      <button class="circle-button" id="init-btn" onclick="loadPage('init')">
        <i class="iconfont icon-home"></i>
      </button>
      <div
        id="tooltip-char"
        class="tooltip"
        onclick="loadPage('character')"
      ></div>
      <button
        class="circle-button"
        id="char-btn"
        onclick="loadPage('character')"
      >
        <i class="iconfont icon-bars"></i>
      </button>
      <!-- 气泡框 -->
      <div id="tooltip-init" class="tooltip"></div>
      <div id="tooltip-char" class="tooltip"></div>
    </div>

    <script>
      //在一开始就加载主界面
      myAPI.sendToMain("load-page", "init");
      myAPI.addToContent();
      // 向主进程传递文件
      function loadPage(page) {
        myAPI.sendToMain("load-page", page);
        myAPI.addToContent();
      }

      const initBtn = document.getElementById("init-btn");
      const initTooltip = document.getElementById("tooltip-init");
      const charBtn = document.getElementById("char-btn");
      const charTooltip = document.getElementById("tooltip-char");

      // 气泡框展示
      initBtn.addEventListener("mouseenter", () => {
        initTooltip.style.display = "block";
        initTooltip.textContent = "启动页面";
      });

      initBtn.addEventListener("mouseleave", () => {
        initTooltip.style.display = "none";
        initTooltip.textContent = "";
      });

      charBtn.addEventListener("mouseenter", () => {
        charTooltip.style.display = "block";
        charTooltip.textContent = "角色页面";
      });

      charBtn.addEventListener("mouseleave", () => {
        charTooltip.style.display = "none";
        charTooltip.textContent = "";
      });

      //init.html
      // 延迟一段时间等待元素渲染
      setTimeout(() => {
        const inputField = document.getElementById("uid");

        // 监听输入框的键盘按下事件
        inputField.addEventListener("keydown", (event) => {
          if (event.key === "Enter") {
            console.log("Enter key pressed");
            const inputText = inputField.value;
            myAPI.sendUID(inputText);
            myAPI.getUsername();
          }
        });

        //打开原神
        myAPI.openGame();
      }, 100); // 延迟 100 毫秒（根据需要调整延迟时间）
    </script>

    <style>
      body {
        background-image: url("../img/init.jpg");
        background-size: cover;
        background-repeat: no-repeat;
      }
    </style>
  </body>
</html>
